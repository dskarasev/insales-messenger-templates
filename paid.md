# Шаблон уведомления для статуса 'Оплачен'

В данном шаблоне используется проверка на дату создания заказа. Статус высылается только в том случае, если заказ создан не более 7 дней назад. Это сделано для того, чтобы платформа не рассылала сообщения по старым заказам, в случае изменения их статуса.

За это отвечает следующий код. Это только пример для понимания. Сам шаблон сообщения ниже
```
// Получаем дату создания текушего заказа
{% capture order_date %}
  {{ order.creation_date | date: '%Y%j' }}
{% endcapture %}

// Вычисляем сколько дней прошло с момента заказа
{% capture order_days %}
  {{ 'now' | date: '%Y%j' | minus: order_date }}
{% endcapture %}

// Превращаем string в int для возможности вычисления в условии
{% assign order_days2 = order_days | plus: 0 %}

// Проверяем, что заказ создан не более чем 7 дней назад
{% if order_days2 < 7 %}
... тут код шаблона ...
{% endif %}
```

Сообщение в коде представленно в виде одной длинной строки, чтобы не было ненужных переносов строк при отправке сообщения клиенту.

## Шаблон сообщения

```
{% capture order_date %}{{ order.creation_date | date: '%Y%j' }}{% endcapture %}{% capture order_days %}{{ 'now' | date: '%Y%j' | minus: order_date }}{% endcapture %}{% assign order_days2 = order_days | plus: 0 %}{% if order_days2 < 7 %}Заказ №{{ order.number }} в интернет-магазине {{ account.main_host }} оплачен.{% endif %}

```
